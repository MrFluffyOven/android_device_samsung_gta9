#!/bin/bash

# List of kernel modules
modules=(
    8250_mtk.ko
    mtk-dvfsrc.ko
    adapter_class.ko
    mtk-dvfsrc-regulator.ko
    aee_aed.ko
    mtk_dynamic_loading_throttling.ko
    aee_hangdet.ko
    mtk-emi.ko
    aee_rs.ko
    mtk-icc-core.ko
    arm_dsu_pmu.ko
    mtk_iommu.ko
    aw35615_whole.ko
    mtk-kpd.ko
    battery_id_adc.ko
    mtk_low_battery_throttling.ko
    blk-sec-stats.ko
    mtk-mbox.ko
    blocktag.ko
    mtk-mbox-mailbox.ko
    board_id_status.ko
    mtk_mdpm.ko
    bootprof.ko
    mtk-mmc-autok.ko
    cache-parity.ko
    mtk-mmc-dbg.ko
    cfg80211.ko
    mtk-mmc-sec.ko
    charger_class.ko
    mtk-mmdvfs-debug.ko
    chipone.ko
    mtk-mmdvfs.ko
    clk-bringup.ko
    mtk_mm_heap.ko
    clkbuf.ko
    mtk-mml.ko
    clk-chk-mt6789.ko
    mtk_panel_ext.ko
    clk-common.ko
    mtk_pbm.ko
    clk-dbg-mt6789.ko
    mtk_pd_adapter.ko
    clk-disable-unused.ko
    mtk_pd_charging.ko
    clk-fmeter-mt6789.ko
    mtk_pep20.ko
    clk-mt6789-audiosys.ko
    mtk_pep40.ko
    clk-mt6789-bus.ko
    mtk_pep.ko
    clk-mt6789-cam.ko
    mtk-pm-domain-disable-unused.ko
    clk-mt6789-disp_dsc.ko
    mtk-pmic-keys.ko
    clk-mt6789-i2c.ko
    mtk-pmic-wrap.ko
    clk-mt6789-img.ko
    mtk_printk_ctrl.ko
    clk-mt6789-impen.ko
    mtk_rpmsg_mbox.ko
    clk-mt6789.ko
    mtk-scpsys-bringup.ko
    clk-mt6789-mfgcfg.ko
    mtk-scpsys.ko
    clk-mt6789-mmsys.ko
    mtk-scpsys-mt6789.ko
    clk-mt6789-vcodec.ko
    mtk_slbc.ko
    cmdq_helper_inf.ko
    mtk-smi-dbg.ko
    cmdq-platform-mt6789.ko
    mtk-smi.ko
    combine_key_trigger.ko
    mtk-socinfo.ko
    cqhci.ko
    mtk-spmi-pmic.ko
    dbgtop-drm.ko
    mtk-swpm-perf-arm-pmu.ko
    device-apc-common.ko
    mtk_sync.ko
    device-apc-mt6789.ko
    mtk_tinysys_ipi.ko
    dev_ril_bridge.ko
    mtk-uart-apdma.ko
    emi.ko
    mtk_wdt.ko
    emi-mpu.ko
    musb_boost.ko
    extcon-mtk-usb.ko
    musb_hdrc.ko
    extdev_io_class.ko
    musb_main.ko
    gpio_afc.ko
    nvmem_mtk-devinfo.ko
    grdm.ko
    panel-bias.ko
    gxy_psy_sysfs.ko
    pd-chk-mt6789.ko
    hxchipset.ko
    pd_dbg_info.ko
    i2c-mt65xx.ko
    phy-generic.ko
    industrialio-triggered-buffer.ko
    phy-mtk-tphy.ko
    iommu_debug.ko
    phy-mtk-ufs.ko
    iommu_secure.ko
    pidmap.ko
    iommu_test.ko
    pinctrl-mt6789.ko
    irq-dbg.ko
    pinctrl-mtk-common-v2_debug.ko
    jdchipset.ko
    pinctrl-mtk-v2.ko
    kfifo_buf.ko
    pmic_lbat_service.ko
    lcd_default_mipi_fhd_video.ko
    pwm-mtk-disp.ko
    lcd_hx83102e_cd_inx_video.ko
    reboot-mode.ko
    lcd_hx83102e_gx_hsd_incell_video.ko
    regmap-spmi.ko
    lcd_hx83102e_lc_hkc_video.ko
    regulator-vibrator.ko
    lcd_hx83102e_xx_inx_video.ko
    reset-ti-syscon.ko
    lcd_jd9366tc_xx_hkc_video.ko
    rpmb.ko
    lcd_nl9951_gx_boe_video.ko
    rpmb-mtk.ko
    lcd_nt36523d_lc_hsd_video.ko
    rt4831a_drv.ko
    leds-mtk-disp.ko
    rt5133-regulator.ko
    leds-mtk.ko
    rtc-mt6397.ko
    leds-mtk-pwm.ko
    rt_pd_manager.ko
    load_track.ko
    sc89601d_charger.ko
    log_store.ko
    sec_debug.ko
    mac80211.ko
    sec_ext.ko
    mediatek-cpufreq-hw.ko
    sec_extra_info.ko
    mediatek-drm.ko
    sec_reboot.ko
    meta.ko
    sec_reset.ko
    mkp.ko
    sec-rng.ko
    mmprofile.ko
    sgm415xx_charger.ko
    mmqos-common.ko
    sim_tray.ko
    mmqos-mt6789.ko
    softdog.ko
    modules.alias
    modules.dep
    modules.load.recovery
    modules.softdep
    monitor_hang.ko
    mrdump.ko
    system_heap.ko
    mt6358_battery.ko
    tcpc_class.ko
    mt6358-regulator.ko
    tcpc_cps8851.ko
    mt635x-auxadc.ko
    tcpc_et7304.ko
    mt6375-adc.ko
    tcpci_late_sync.ko
    mt6375-auxadc.ko
    tcpc_mt6375.ko
    mt6375-charger.ko
    teeperf.ko
    mt6375.ko
    tinysys-scmi.ko
    mt6397.ko
    touch_common.ko
    mt63xx-debug.ko
    tzdev.ko
    mt6577_auxadc.ko
    ufs-mediatek-dbg.ko
    mt6789_dcm.ko
    ufs-mediatek-mod.ko
    mtk_battery_oc_throttling.ko
    uload_ind.ko
    mtk_charger_algorithm_class.ko
    upm6910x_charger.ko
    mtk_charger_framework.ko
    usb_f_conn_gadget.ko
    mtk_chg_type_det.ko
    usb_f_dm.ko
    mtk-cmdq-drv-ext.ko
    usb_f_ss_mon_gadget.ko
    mtk-cqdma.ko
    usb_notifier.ko
    mtk_dcm.ko
    usb_notify_layer.ko
    mtk_disp_notify.ko
    vcp_status.ko
    mtk_dramc.ko
    zram.ko
    mtk-dvfsrc-devfreq.ko
    zsmalloc.ko
    mtk-dvfsrc-helper.ko
)

# Directory where modules are located
module_dir="/lib/modules"

# Load each module
for module in "${modules[@]}"; do
    echo "Loading $module..."
    insmod "$module_dir/$module"
    if [ $? -eq 0 ]; then
        echo "$module loaded successfully."
    else
        echo "Failed to load $module."
    fi
done

echo "Module loading complete."
